# 字符串(String)常用函数总结

## 一、基本操作
### 1. 初始化
```cpp
string s1;              // 空字符串
string s2("hello");     // 从C字符串初始化
string s3(5, 'a');      // "aaaaa"
string s4(s2);          // 拷贝构造
```

### 2. 长度/容量
```cpp
s.size();       // 返回字符数（同length()）
s.empty();      // 判断是否为空
s.capacity();   // 返回分配的内存大小
s.reserve(100); // 预分配空间
```

## 二、元素访问
```cpp
s[0];           // 不检查边界（更快）
s.at(0);        // 检查边界（更安全）
s.front();      // 首字符
s.back();       // 末字符
```

## 三、修改操作
### 1. 拼接
```cpp
s += " world";  // 追加
s.append("!!"); // 同+=
s.push_back('!');// 追加单个字符
```

### 2. 插入/删除
```cpp
s.insert(5, " ");    // 位置5插入空格
s.erase(5, 1);       // 从5开始删除1字符
s.clear();           // 清空
s.pop_back();        // 删除末尾字符（C++11）
```

### 3. 替换
```cpp
s.replace(6, 5, "there"); // 从6开始替换5字符
```

## 四、查找操作
```cpp
s.find("lo");         // 首次出现位置
s.rfind("lo");        // 最后一次出现
s.find_first_of("aeiou");  // 找任意元音首次出现
s.find_last_not_of("0123456789"); // 找最后一个非数字
```

## 五、子字符串
```cpp
s.substr(6);     // 从6到结尾
s.substr(0, 5);  // 从0开始5字符
```

## 六、数值转换（C++11）
```cpp
to_string(123);  // 数值→字符串
stoi("456");     // 字符串→int
stod("3.14");    // 字符串→double
```

## 七、大小写转换
```cpp
// 转小写
transform(s.begin(), s.end(), s.begin(), ::tolower);
// 转大写
transform(s.begin(), s.end(), s.begin(), ::toupper);
```

## 八、实用扩展
### 1. 分割字符串
```cpp
vector<string> split(const string& s, char delim) {
    vector<string> tokens;
    size_t start = 0, end = 0;
    while ((end = s.find(delim, start)) != string::npos) {
        tokens.push_back(s.substr(start, end - start));
        start = end + 1;
    }
    tokens.push_back(s.substr(start));
    return tokens;
}
```

### 2. 去空格
```cpp
// 去左空格
s.erase(s.begin(), find_if(s.begin(), s.end(), [](int ch) { 
    return !isspace(ch); 
}));
// 去右空格
s.erase(find_if(s.rbegin(), s.rend(), [](int ch) { 
    return !isspace(ch); 
}).base(), s.end());
```

## 九、C++17新特性
```cpp
string_view sv = "Hello"; // 非拥有视图，零拷贝
```

## 复杂度总结
| 操作         | 时间复杂度 | 备注                  |
|--------------|------------|-----------------------|
| 访问/修改    | O(1)       | 随机访问              |
| 插入/删除    | O(n)       | 可能触发内存重新分配  |
| find/substr  | O(n)       | 线性扫描              |
| 数值转换     | O(n)       | 需解析整个字符串      |

> 注：所有操作空间复杂度一般为O(1)，除非产生新字符串（如substr）
